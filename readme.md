# Life‑Course Data Explorer – Developer README

A **single‑page, offline‑first kiosk application** that visualises how Luxembourg’s linked administrative, survey and curriculum datasets describe the entire human life‑cycle—from birth through seniority—and how the Living Conditions department turns those data into research and policy advice.

Visitors arrive at an **attract screen** (animated idle loop). Touching the screen launches a **life‑stage timeline**. Each stage opens to reveal short research insights and a compact interactive network showing the variables and data links used. Inside a stage, visitors can drill further by tapping **domain buttons** (e.g. *Poverty*, *Family*, *Education*, *Well‑being*). All movement between views is driven by lightweight CSS + Framer‑Motion animations so the experience feels alive yet remains performant on kiosk hardware.

---

## 1  Project snapshot  

| Area           | Choice                                             |
| -------------- | -------------------------------------------------- |
| **Framework**  | React 18 + TypeScript (Vite)                       |
| **Styling**    | Tailwind CSS 3                                     |
| **Animations** | Framer‑Motion 7                                    |
| **Graph**      | Cytoscape.js                                       |
| **Data**       | Static JSON generated from CSV via Python 3 script |
| **Runtime**    | Chrome in kiosk mode (`--kiosk --app …`)           |

---

## 2  Prerequisites

\* Node ≥ 20
\* npm ≥ 10 (or pnpm / yarn)
\* Python ≥ 3.9 (for data‑import script)

---

## 3  Folder map

```
root/
├── public/           # static assets
│   ├── fonts/
│   ├── img/
│   └── animations/   # Lottie JSON / MP4 loops for attract + transitions
├── scripts/
│   └── build_json.py # CSV → JSON converter
├── src/
│   ├── components/   # StageNav, GraphPanel, DomainButtons, etc.
│   ├── data/         # JSON generated by script (never hand‑edit)
│   ├── hooks/
│   ├── pages/        # StageScreen, HomeScreen, AttractScreen
│   ├── store.ts      # Zustand global state
│   ├── animations.ts # Centralised motion variants
│   └── main.tsx
└── vite.config.ts
```

---

## 4  External files you will receive (or request)

| File                       | Expected columns / fields                   | Purpose                                        |
| -------------------------- | ------------------------------------------- | ---------------------------------------------- |
| `blurbs.csv`               | `id,title,blurb,icon,stage,domain`          | ≤ 80‑word blurbs; one row per research insight |
| `graph_nodes.csv`          | `id,label,stage,domain`                     | Nodes for Cytoscape                            |
| `graph_edges.csv`          | `source,target,type`                        | Edges (correlation, transition, gap)           |
| `metrics.csv` *(optional)* | `stage,metric,value`                        | Highlight numbers per stage                    |
| `domains.csv` *(optional)* | `id,label,stage,colour`                     | Defines the domain buttons inside a stage      |
| PNG/SVG icons              | One per stage & per domain                  | Used by StageNav & DomainButtons               |
| Animation assets           | `attract.json` + `stageEnter.json` (Lottie) | Idle loop & stage‑transition motion            |

All CSVs live in `data/raw/` and are **source‑of‑truth**. The build script converts them into the JSON documents consumed by the app.

---

## 5  Screen & animation flow

1. **Attract Screen**
   *File:* `AttractScreen.tsx`
   • Loops a Lottie or MP4 animation (`public/animations/attract.json`).
   • Displays “Touch to explore Luxembourg’s life‑course data”.

2. **Touch event ➜ Timeline transition**
   • Framer‑Motion variant `timelineEnter` slides the life‑stage strip in while fading out the attract loop.

3. **Life‑Stage Timeline (HomeScreen)**
   • Horizontal buttons (Early ▸ Senior).
   • Idle timer returns to AttractScreen after 45 s of no interaction.

4. **Stage Enter**
   • Click → motion variant `stageEnter` zooms the clicked button to full‑screen.
   • Secondary buttons appear with stagger fade‑in.

5. **Stage Screen layout**
   • Left: animated stage illustration (SVG with subtle loop).
   • Right: blurb text + metric chips.
   • Bottom: DomainButtons row (Poverty, Family, Education, etc.).
   • GraphPanel blends in using motion variant `graphFade`.

6. **Domain Click**
   • Replaces blurb with domain‑specific insight; highlights relevant graph nodes.
   • Button press animates via Framer `scale: 0.95`.

7. **Back Nav / Swipe**
   • Swiping right or tapping home icon triggers `stageExit` motion and shows timeline again.

---

## 6  Data schemas after build

### 6.1  `lifeStages.json`

```jsonc
[
  {
    "id": "early",
    "title": "Early Childhood",
    "icon": "👶",
    "colour": "#8dd35f",
    "domains": ["family", "education"],
    "metrics": ["75 % childcare enrolment"],
    "blurbs": ["early_pov", "early_fam"]  // ids of blurb objects
  },
  …
]
```

### 6.2  `blurbs.json`

```jsonc
{
  "early_pov": {
    "stage": "early",
    "domain": "poverty",
    "title": "Childcare costs & income risk",
    "text": "75 % of low‑income households incur >10 % of net income on childcare fees …"
  }
}
```

### 6.3  `graph.json`

See original schema; nodes are enriched with `domain` for domain‑filter highlighting.

---

## 7  Local development

```bash
# install
npm install

# ingest raw CSV → JSON\python scripts/build_json.py

# hot‑reload dev server
npm run dev
```

Open `http://localhost:5173` in a desktop browser **with device toolbar set to 1080×1920** to approximate portrait kiosk.

---

## 8  Contribution workflow

1. **Branch** `feat/<topic>` and keep PRs <400 loc.
2. **For content edits** modify only CSVs → run build script → commit `${csvName}: update content`.
3. **For UI** include Storybook story or screenshot.

---

## 9  Building for kiosk deployment

```bash
npm run build      # outputs dist/
```

Copy `dist/` + the `chrome-start.bat` helper to kiosk PC. The batch file contains:

```bat
start chrome --kiosk --app="file:///C:/kiosk/dist/index.html" --incognito --noerrdialogs
```

---

## 10  Open tasks before first demo

* Integrate attract‑loop Lottie animation.
* Hook idle‑timeout reset (45 s).
* Finalise domain colours & icons.
* Accessibility: ensure focus order works on keyboard.

---

## 11  Licence

Internal LISER prototype. Contact the Living Conditions SPoC before external distribution.
