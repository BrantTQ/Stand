# Lifeâ€‘Course Data Explorer â€“ DeveloperÂ README

A **singleâ€‘page, offlineâ€‘first kiosk application** that visualises how Luxembourgâ€™s linked administrative, survey and curriculum datasets describe the entire human lifeâ€‘cycleâ€”from birth through seniorityâ€”and how the Livingâ€¯Conditions department turns those data into research and policy advice.

Visitors arrive at an **attract screen** (animated idle loop). Touching the screen launches a **lifeâ€‘stage timeline**. Each stage opens to reveal short research insights and a compact interactive network showing the variables and data links used. Inside a stage, visitors can drill further by tapping **domain buttons** (e.g. *Poverty*,Â *Family*,Â *Education*, *Wellâ€‘being*). All movement between views is driven by lightweight CSSÂ + Framerâ€‘Motion animations so the experience feels alive yet remains performant on kiosk hardware.

---

## 1Â Â Project snapshotÂ Â 

| Area           | Choice                                             |
| -------------- | -------------------------------------------------- |
| **Framework**  | ReactÂ 18Â + TypeScript (Vite)                       |
| **Styling**    | TailwindÂ CSSÂ 3                                     |
| **Animations** | Framerâ€‘MotionÂ 7                                    |
| **Graph**      | Cytoscape.js                                       |
| **Data**       | Static JSON generated from CSV via Python 3 script |
| **Runtime**    | Chrome in kiosk mode (`--kiosk --app â€¦`)           |

---

## 2Â Â Prerequisites

\*Â NodeÂ â‰¥Â 20
\*Â npmÂ â‰¥Â 10Â (or pnpm / yarn)
\*Â PythonÂ â‰¥Â 3.9Â (for dataâ€‘import script)

---

## 3Â Â Folder map

```
root/
â”œâ”€â”€ public/           # static assets
â”‚Â Â  â”œâ”€â”€ fonts/
â”‚Â Â  â”œâ”€â”€ img/
â”‚Â Â  â””â”€â”€ animations/   # Lottie JSON / MP4 loops for attract + transitions
â”œâ”€â”€ scripts/
â”‚Â Â  â””â”€â”€ build_json.py # CSV â†’ JSON converter
â”œâ”€â”€ src/
â”‚Â Â  â”œâ”€â”€ components/   # StageNav, GraphPanel, DomainButtons, etc.
â”‚Â Â  â”œâ”€â”€ data/         # JSON generated by script (never handâ€‘edit)
â”‚Â Â  â”œâ”€â”€ hooks/
â”‚Â Â  â”œâ”€â”€ pages/        # StageScreen, HomeScreen, AttractScreen
â”‚Â Â  â”œâ”€â”€ store.ts      # Zustand global state
â”‚Â Â  â”œâ”€â”€ animations.ts # Centralised motion variants
â”‚Â Â  â””â”€â”€ main.tsx
â””â”€â”€ vite.config.ts
```

---

## 4Â Â External files you will receive (or request)

| File                       | Expected columns / fields                   | Purpose                                        |
| -------------------------- | ------------------------------------------- | ---------------------------------------------- |
| `blurbs.csv`               | `id,title,blurb,icon,stage,domain`          | â‰¤â€¯80â€‘word blurbs; one row per research insight |
| `graph_nodes.csv`          | `id,label,stage,domain`                     | Nodes for Cytoscape                            |
| `graph_edges.csv`          | `source,target,type`                        | Edges (correlation, transition, gap)           |
| `metrics.csv` *(optional)* | `stage,metric,value`                        | Highlight numbers per stage                    |
| `domains.csv` *(optional)* | `id,label,stage,colour`                     | Defines the domain buttons inside a stage      |
| PNG/SVG icons              | One per stage & per domain                  | Used by StageNav & DomainButtons               |
| Animation assets           | `attract.json` + `stageEnter.json` (Lottie) | Idle loop & stageâ€‘transition motion            |

All CSVs live in `data/raw/` and are **sourceâ€‘ofâ€‘truth**. The build script converts them into the JSON documents consumed by the app.

---

## 5Â Â Screen & animation flow

1. **AttractÂ Screen**
   *File:* `AttractScreen.tsx`
   â€¢ Loops a Lottie or MP4 animation (`public/animations/attract.json`).
   â€¢ Displays â€œTouch to explore Luxembourgâ€™s lifeâ€‘course dataâ€.

2. **Touch event âžœ Timeline transition**
   â€¢ Framerâ€‘Motion variant `timelineEnter` slides the lifeâ€‘stage strip in while fading out the attract loop.

3. **Lifeâ€‘StageÂ Timeline (HomeScreen)**
   â€¢ Horizontal buttons (Early â–¸ Senior).
   â€¢ Idle timer returns to AttractScreen after 45Â s of no interaction.

4. **StageÂ Enter**
   â€¢ ClickÂ â†’ motion variant `stageEnter` zooms the clicked button to fullâ€‘screen.
   â€¢ Secondary buttons appear with stagger fadeâ€‘in.

5. **StageÂ Screen layout**
   â€¢ Left: animated stage illustration (SVG with subtle loop).
   â€¢ Right: blurb text + metric chips.
   â€¢ Bottom: DomainButtons row (Poverty, Family, Education, etc.).
   â€¢ GraphPanel blends in using motion variant `graphFade`.

6. **DomainÂ Click**
   â€¢ Replaces blurb with domainâ€‘specific insight; highlights relevant graph nodes.
   â€¢ Button press animates via Framer `scale:Â 0.95`.

7. **BackÂ Nav / Swipe**
   â€¢ Swiping right or tapping home icon triggers `stageExit` motion and shows timeline again.

---

## 6Â Â Data schemas after build

### 6.1Â Â `lifeStages.json`

```jsonc
[
  {
    "id": "early",
    "title": "Early Childhood",
    "icon": "ðŸ‘¶",
    "colour": "#8dd35f",
    "domains": ["family", "education"],
    "metrics": ["75 % childcare enrolment"],
    "blurbs": ["early_pov", "early_fam"]  // ids of blurb objects
  },
  â€¦
]
```

### 6.2Â Â `blurbs.json`

```jsonc
{
  "early_pov": {
    "stage": "early",
    "domain": "poverty",
    "title": "Childcare costs & income risk",
    "text": "75Â % of lowâ€‘income households incur >10Â % of net income on childcare fees â€¦"
  }
}
```

### 6.3Â Â `graph.json`

See original schema; nodes are enriched with `domain` for domainâ€‘filter highlighting.

---

## 7Â Â Local development

```bash
# install
npm install

# ingest raw CSV â†’ JSON\python scripts/build_json.py

# hotâ€‘reload dev server
npm run dev
```

Open `http://localhost:5173` in a desktop browser **with device toolbar set to 1080Ã—1920** to approximate portrait kiosk.

---

## 8Â Â Contribution workflow

1. **Branch** `feat/<topic>` and keep PRs <400Â loc.
2. **For content edits** modify only CSVs â†’ run build script â†’ commit `${csvName}: update content`.
3. **For UI** include Storybook story or screenshot.

---

## 9Â Â Building for kiosk deployment

```bash
npm run build      # outputs dist/
```

Copy `dist/` + the `chrome-start.bat` helper to kiosk PC. The batch file contains:

```bat
start chrome --kiosk --app="file:///C:/kiosk/dist/index.html" --incognito --noerrdialogs
```

---

## 10Â Â Open tasks before first demo

* Integrate attractâ€‘loop Lottie animation.
* Hook idleâ€‘timeout reset (45Â s).
* Finalise domain colours & icons.
* Accessibility: ensure focus order works on keyboard.

---

## 11Â Â Licence

Internal LISER prototype. Contact the LivingÂ Conditions SPoC before external distribution.
